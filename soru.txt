bu klasordeki tum dosyalari dikkatlice ve en ince ayrintisina kadar incele bilgi olarak da ilk olarak click.py su ise yarar Bu Python kodu, coÄŸrafi konum bilgisi (GPS verisi) iÃ§eren bir fotoÄŸrafta tÄ±kladÄ±ÄŸÄ±nÄ±z bir noktanÄ±n gerÃ§ek dÃ¼nyadaki GPS koordinatlarÄ±nÄ± (enlem ve boylam) hesaplayan bir araÃ§tÄ±r. Ã–zellikle bir drone ile Ã§ekilmiÅŸ hava fotoÄŸraflarÄ± Ã¼zerinde belirli nesneleri veya konumlarÄ± etiketlemek iÃ§in tasarlanmÄ±ÅŸtÄ±r.

AdÄ±m AdÄ±m Ne YaptÄ±ÄŸÄ±
Resmi YÃ¼kler: Komut satÄ±rÄ±ndan belirttiÄŸiniz fotoÄŸraf dosyasÄ±nÄ± (IMG_0122.jpg gibi) aÃ§ar.

GPS Verisini Okur: FotoÄŸrafÄ±n EXIF meta verilerinden, fotoÄŸrafÄ±n Ã§ekildiÄŸi andaki dronun veya kameranÄ±n kendi GPS konumunu (enlem, boylam ve irtifa) alÄ±r.

Resmi GÃ¶sterir: FotoÄŸrafÄ± ekranda bir pencerede gÃ¶rÃ¼ntÃ¼ler, bÃ¶ylece Ã¼zerine tÄ±klayabilirsiniz.

TÄ±klamayÄ± Bekler: Siz resim Ã¼zerinde herhangi bir yere fare ile tÄ±kladÄ±ÄŸÄ±nÄ±zda on_click fonksiyonu tetiklenir.

KoordinatlarÄ± Hesaplar: TÄ±kladÄ±ÄŸÄ±nÄ±z pikselin konumunu (x, y), dronun GPS konumu, yÃ¼ksekliÄŸi ve kameranÄ±n gÃ¶rÃ¼ÅŸ aÃ§Ä±sÄ± gibi bilgilerle birleÅŸtirerek karmaÅŸÄ±k bir matematiksel hesaplama (pixel_to_gps fonksiyonu) yapar. Bu hesaplama sonucunda, tÄ±kladÄ±ÄŸÄ±nÄ±z pikselin yeryÃ¼zÃ¼ndeki gerÃ§ek enlem ve boylamÄ±nÄ± bulur.

Etiket Sorar: Koordinatlar hesaplandÄ±ktan sonra, size tÄ±kladÄ±ÄŸÄ±nÄ±z ÅŸeyin ne olduÄŸunu soran kÃ¼Ã§Ã¼k bir pencere aÃ§ar (Ã¶rneÄŸin "aÄŸaÃ§", "araba", "bina" vb.).

Dosyaya Kaydeder: Hesaplanan GPS koordinatlarÄ±nÄ± ve girdiÄŸiniz etiketi, files/detections/clicked_coordinates.csv adlÄ± bir CSV dosyasÄ±na yeni bir satÄ±r olarak ekler.     coordinate_calculator ise su ise yarar  Bu kod, Ã¶nceki Ã¶rneklerin Ã§ok daha geliÅŸmiÅŸ ve tamamen otomatikleÅŸtirilmiÅŸ bir versiyonudur. Belirli bir klasÃ¶rÃ¼ sÃ¼rekli olarak gÃ¶zetler ve bu klasÃ¶re yeni bir fotoÄŸraf eklendiÄŸinde, fotoÄŸraf Ã¼zerindeki nesneleri (insan, araba vb.) yapay zeka ile tespit edip her bir nesnenin gerÃ§ek dÃ¼nya GPS koordinatÄ±nÄ± hesaplar ve sonuÃ§larÄ± bir CSV dosyasÄ±na otomatik olarak kaydeder. ğŸ”¥

NasÄ±l Ã‡alÄ±ÅŸÄ±r? (AdÄ±m AdÄ±m Ä°ÅŸ AkÄ±ÅŸÄ±)
Bu kodun Ã§alÄ±ÅŸma mantÄ±ÄŸÄ± iki ana parÃ§adan oluÅŸur: Bir "gÃ¶zetleyici" ve bir "iÅŸleyici".

GÃ¶zetleme (Ana DÃ¶ngÃ¼):

Program baÅŸladÄ±ÄŸÄ±nda, ./files/images klasÃ¶rÃ¼nÃ¼ sÃ¼rekli olarak izlemeye baÅŸlar.

Bu klasÃ¶re .jpg uzantÄ±lÄ± yeni bir resim dosyasÄ± eklendiÄŸini fark ettiÄŸi anda, bu dosyanÄ±n yolunu bir "iÅŸ kuyruÄŸuna" (image_queue) ekler.

Ä°ÅŸleme (Arka Plan Ä°ÅŸÃ§isi - Worker Thread):

Programla birlikte arka planda ayrÄ± bir "iÅŸÃ§i" (image_worker) Ã§alÄ±ÅŸmaya baÅŸlar. Bu iÅŸÃ§inin tek gÃ¶revi, iÅŸ kuyruÄŸunu dinlemektir.

KuyruÄŸa yeni bir resim dosyasÄ± eklendiÄŸinde, iÅŸÃ§i bu dosyayÄ± alÄ±r ve aÅŸaÄŸÄ±daki iÅŸlemleri sÄ±rayla yapar:

GPS Verisini Okur: FotoÄŸrafÄ±n EXIF verilerinden Ã§ekildiÄŸi anki drone konumunu (enlem, boylam, irtifa) okur.

GÃ¶rÃ¼ntÃ¼yÃ¼ BÃ¶ler: BÃ¼yÃ¼k fotoÄŸrafÄ± daha kÃ¼Ã§Ã¼k parÃ§alara (kodda 8x12'lik bir Ä±zgaraya) bÃ¶ler. Bu, bÃ¼yÃ¼k resimlerde nesne tespitini daha verimli hale getirir.

Nesneleri Tespit Eder (YOLO): Her bir kÃ¼Ã§Ã¼k parÃ§a Ã¼zerinde yolo12x.pt adlÄ± yapay zeka modelini Ã§alÄ±ÅŸtÄ±rarak "insan", "araba", "tekne" gibi nesneleri arar.

KoordinatlarÄ± Hesaplar: Tespit ettiÄŸi her nesnenin merkez pikselini bulur ve pixel_to_gps fonksiyonunu kullanarak bu pikselin yeryÃ¼zÃ¼ndeki gerÃ§ek GPS koordinatÄ±nÄ± (enlem, boylam) hesaplar.

SonuÃ§larÄ± Kaydeder: BulduÄŸu tÃ¼m nesnelerin bilgilerini (sÄ±nÄ±f, tespit gÃ¼veni, enlem, boylam) ./files/detections/detections.csv dosyasÄ±na yeni satÄ±rlar olarak ekler.

Bu yapÄ± sayesinde program, bir yandan yeni fotoÄŸraflarÄ± ararken diÄŸer yandan aÄŸÄ±r olan gÃ¶rÃ¼ntÃ¼ iÅŸleme gÃ¶revini arka planda yÃ¼rÃ¼tebilir. Bu, sistemin donmadan akÄ±cÄ± bir ÅŸekilde Ã§alÄ±ÅŸmasÄ±nÄ± saÄŸlar.

KullanÄ±lan Ana Teknolojiler
YOLO (You Only Look Once): GÃ¶rÃ¼ntÃ¼lerdeki nesneleri Ã§ok hÄ±zlÄ± bir ÅŸekilde tespit etmek iÃ§in kullanÄ±lan popÃ¼ler ve gÃ¼Ã§lÃ¼ bir yapay zeka modelidir.

Multithreading (threading & queue): ProgramÄ±n aynÄ± anda birden fazla iÅŸ yapmasÄ±nÄ± saÄŸlar. Ana dÃ¶ngÃ¼ klasÃ¶rÃ¼ gÃ¶zetlerken, "iÅŸÃ§i thread" arka planda resim iÅŸleme gibi aÄŸÄ±r bir gÃ¶revi yerine getirir. Bu, verimliliÄŸi artÄ±rÄ±r ve programÄ±n donmasÄ±nÄ± engeller.

GPS Hesaplama (pixel_to_gps): Drone'un konumu, yÃ¼ksekliÄŸi ve kamera aÃ§Ä±sÄ± gibi verileri kullanarak gÃ¶rÃ¼ntÃ¼deki bir pikselin yerdeki coÄŸrafi karÅŸÄ±lÄ±ÄŸÄ±nÄ± bulan matematiksel fonksiyondur.

image_operations.py dosyasi da su ise yarar Bu kod, bir gÃ¶rÃ¼ntÃ¼ veya video karesi iÃ§indeki geometrik ÅŸekilleri (Ã¶zellikle Ã¼Ã§genleri) tespit etmek iÃ§in tasarlanmÄ±ÅŸ bir bilgisayarlÄ± gÃ¶rÃ¼ (computer vision) modÃ¼lÃ¼dÃ¼r. ğŸ“

Bu dosya, tek baÅŸÄ±na Ã§alÄ±ÅŸan bir programdan ziyade, diÄŸer programlarÄ±n import ederek kullanabileceÄŸi bir araÃ§ kutusu (kÃ¼tÃ¼phane) gÃ¶revi gÃ¶rÃ¼r. Ä°Ã§inde farklÄ± gÃ¶rÃ¼ntÃ¼ iÅŸleme gÃ¶revleri iÃ§in sÄ±nÄ±flar ve yardÄ±mcÄ± fonksiyonlar barÄ±ndÄ±rÄ±r.

DetaylÄ± Olarak Ne Yapar?
Kodun yapÄ±sÄ± birkaÃ§ ana bÃ¶lÃ¼mden oluÅŸur:

1. YardÄ±mcÄ± Fonksiyonlar
Bunlar, geometrik hesaplamalar yapan kÃ¼Ã§Ã¼k ve temel araÃ§lardÄ±r:

calculate_centroid: Bir konturun (ÅŸeklin dÄ±ÅŸ hattÄ±) geometrik merkezini hesaplar.

line_intersection: Ä°ki Ã§izginin matematiksel olarak kesiÅŸtiÄŸi noktayÄ± bulur.

are_line_endpoints_close: Ä°ki Ã§izginin uÃ§ noktalarÄ±nÄ±n birbirine yeterince yakÄ±n olup olmadÄ±ÄŸÄ±nÄ± kontrol eder. Bu, Ã§izgilerin aynÄ± ÅŸekle ait olup olmadÄ±ÄŸÄ±nÄ± anlamaya yardÄ±mcÄ± olur.

side_length: Ä°ki nokta arasÄ±ndaki mesafeyi (bir kenarÄ±n uzunluÄŸunu) hesaplar.

2. Ana SÄ±nÄ±flar (Classes)
Kodun ana iÅŸlevselliÄŸi bu sÄ±nÄ±flarda toplanmÄ±ÅŸtÄ±r:

ImageProcessor (GÃ¶rÃ¼ntÃ¼ Ä°ÅŸleyici):
Bu, temel bir sÄ±nÄ±ftÄ±r. Ana iÅŸlevi, bir videodaki hareketli nesneleri cv2.createBackgroundSubtractorMOG2() kullanarak algÄ±lamak ve bu nesnelerin merkezine yeÅŸil bir daire Ã§izmektir. Genel amaÃ§lÄ± bir hareket dedektÃ¶rÃ¼ olarak dÃ¼ÅŸÃ¼nÃ¼lebilir.

TriangleDetector (ÃœÃ§gen DedektÃ¶rÃ¼):
Bu, kodun en Ã¶nemli ve en geliÅŸmiÅŸ kÄ±smÄ±dÄ±r. Bir gÃ¶rÃ¼ntÃ¼deki Ã¼Ã§genleri bulmaya odaklanÄ±r. Bunu yapmak iÃ§in karmaÅŸÄ±k bir dizi iÅŸlem uygular:

Ã–n Ä°ÅŸleme: GÃ¶rÃ¼ntÃ¼yÃ¼ alÄ±r, yeniden boyutlandÄ±rÄ±r, GaussianBlur ile pÃ¼rÃ¼zsÃ¼zleÅŸtirir ve gri tonlamalÄ± hale getirir.

Kenar Tespiti: Canny kenar tespiti algoritmasÄ±yla gÃ¶rÃ¼ntÃ¼deki belirgin kenarlarÄ± bir haritaya dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r.

Ã‡izgi Bulma: Hough Line Transform algoritmasÄ±nÄ± kullanarak bu kenar haritasÄ± Ã¼zerindeki tÃ¼m dÃ¼z Ã§izgileri tespit eder.

KombinasyonlarÄ± Test Etme: Tespit edilen tÃ¼m Ã§izgileri alÄ±r ve Ã¼Ã§erli kombinasyonlar halinde gruplar. Bu, "acaba bu Ã¼Ã§ Ã§izgi bir Ã¼Ã§gen oluÅŸturur mu?" sorusunu sormak gibidir.

DoÄŸrulama (_forms_triangle): Her Ã¼Ã§lÃ¼ Ã§izgi grubunun gerÃ§ekten bir Ã¼Ã§gen oluÅŸturup oluÅŸturmadÄ±ÄŸÄ±nÄ± sÄ±kÄ± kurallarla kontrol eder:

ÃœÃ§ Ã§izginin de birbirini kestiÄŸinden emin olur.

Ã‡izgilerin uÃ§ noktalarÄ±nÄ±n birbirine yakÄ±n olduÄŸunu doÄŸrular.

Kenar uzunluklarÄ±nÄ±n birbirine yakÄ±n olup olmadÄ±ÄŸÄ±nÄ± kontrol ederek neredeyse eÅŸkenar bir Ã¼Ã§gen arar.

Merkez NoktayÄ± Bulma: GeÃ§erli bir veya daha fazla Ã¼Ã§gen bulursa, bu Ã¼Ã§genlerin merkez noktasÄ±nÄ± (centroid) hesaplar ve bu noktayÄ± geri dÃ¶ndÃ¼rÃ¼r.

HexagonDetector (AltÄ±gen DedektÃ¶rÃ¼):
Bu sÄ±nÄ±f, gelecekte altÄ±gen tespiti eklenmesi amacÄ±yla oluÅŸturulmuÅŸ, ancak henÃ¼z tamamlanmamÄ±ÅŸ bir taslaktÄ±r. YapÄ±sÄ± TriangleDetector'a benzer ancak altÄ± Ã§izginin kombinasyonlarÄ±nÄ± kontrol etmesi gerekir.       test_camera_serbest.py ise su sekildedir          Bu kod, bir video kaynaÄŸÄ±ndan (bilgisayarÄ±n kamerasÄ± veya bir aÄŸ akÄ±ÅŸÄ±) anlÄ±k olarak gÃ¶rÃ¼ntÃ¼ alÄ±p bu gÃ¶rÃ¼ntÃ¼deki Ã¼Ã§gen ÅŸekillerini tespit eden bir programdÄ±r. Tespit ettiÄŸi her Ã¼Ã§genin merkez koordinatlarÄ±nÄ± da ekrana yazdÄ±rÄ±r.

AdÄ±m AdÄ±m Ne Yapar?
Video KaynaÄŸÄ±nÄ± AlÄ±r: ProgramÄ± Ã§alÄ±ÅŸtÄ±rÄ±rken ona bir "baÄŸlantÄ± dizesi" (connection_string) verirsiniz. Bu, videonun nereden alÄ±nacaÄŸÄ±nÄ± sÃ¶yler. 'webcam' derseniz bilgisayarÄ±n kamerasÄ±nÄ±, 'gstreamer:<port>' derseniz belirtilen porttaki bir aÄŸ akÄ±ÅŸÄ±nÄ± kullanÄ±r.

Video AkÄ±ÅŸÄ±nÄ± BaÅŸlatÄ±r: VideoRetriever adlÄ± bir nesne oluÅŸturarak belirtilen kaynaktan video akÄ±ÅŸÄ±nÄ± almaya baÅŸlar.

Kare Kare Ä°ÅŸler: Video akÄ±ÅŸÄ±ndan gelen her bir fotoÄŸraf karesini (frame) tek tek bir dÃ¶ngÃ¼ iÃ§inde ele alÄ±r.

ÃœÃ§gen Arar: Her bir karenin Ã¼zerinde, TriangleDetector adlÄ± nesneyi kullanarak Ã¼Ã§gen olup olmadÄ±ÄŸÄ±nÄ± kontrol eder. Bu nesne, gÃ¶rÃ¼ntÃ¼ iÅŸleme teknikleri kullanarak Ã¼Ã§genleri bulmak iÃ§in tasarlanmÄ±ÅŸtÄ±r.

Sonucu YazdÄ±rÄ±r: EÄŸer bir Ã¼Ã§gen bulursa, bu Ã¼Ã§genin merkez noktasÄ±nÄ±n (centroid) koordinatlarÄ±nÄ± terminale yazdÄ±rÄ±r. Ã–rneÄŸin: Triangle detected at: [(250, 150)] gibi bir Ã§Ä±ktÄ± verir. EÄŸer bir karede Ã¼Ã§gen bulamazsa hiÃ§bir ÅŸey yapmadan sonraki kareye geÃ§er.

KaynaklarÄ± Serbest BÄ±rakÄ±r: Program kapatÄ±ldÄ±ÄŸÄ±nda veya bir hata oluÅŸtuÄŸunda, video kaynaÄŸÄ±nÄ± dÃ¼zgÃ¼n bir ÅŸekilde kapatÄ±r (retriever.release()).

dedigim gibi bu kodlari cok dikkatlice incele. bu kodlarda sadece ucgen deteect edilmiyor ayrica altigen de detect ediliyor. daha dogrusu kirmizi ucgen ile mavi altigen detect ediyor. bu kodlari birlestirerek bir yapi olustur. bu yapiyi da calisacakhal isminde bir dosyaya yaz